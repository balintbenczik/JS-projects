<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <title>Weather app</title>
  </head>
  <body class="bg-gray-200 flex items-center content-center min-h-screen">
    <div
      class="flex flex-col rounded shadow w-[400px] p-[20px] bg-gray-100 mx-auto justify-center items-center"
    >
      <h1 class="text-2xl">Weather App</h1>
      <input
        class="border-black w-80 p-[10px] m-3"
        type="text"
        id="locationInput"
        placeholder="Enter a city"
      />
      <button
        class="rounded p-2 text-white bg-[#007BFF] transition duration-500 ease-in-out hover:bg-teal-400"
        id="searchButton"
      >
        Search
      </button>
      <div class="mt-3">
        <h2 id="location"></h2>
        <p id="temperature"></p>
        <p id="description"></p>
      </div>
    </div>
   <script>

    // Declare everything we need from document

  const locationInput = document.querySelector("#locationInput");
  const searchButton = document.querySelector("#searchButton");
  const locationElement = document.querySelector("#location");
  const temperatureElement = document.querySelector("#temperature");
  const descriptionElement = document.querySelector("#description");

  searchButton.addEventListener("click", async () => {
    const location = locationInput.value.trim();
    if (!location) {
      locationElement.textContent = "Please enter a city name!";
      temperatureElement.textContent = "";
      descriptionElement.textContent = "";
      return;
    }

    locationElement.textContent = "Loading...";
    temperatureElement.textContent = "";
    descriptionElement.textContent = "";

    try {

      // Search for cities with Geocoding API

      const geoRes = await fetch(
        `https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(location)}&count=1`
      );
      const geoData = await geoRes.json();

      if (!geoData.results || geoData.results.length === 0) {
        locationElement.textContent = "City not found ğŸ˜¢";
        return;
      }

      const { latitude, longitude, name, country } = geoData.results[0];

      // Ask for weather with Open Meteo API
      const weatherRes = await fetch(
        `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true&timezone=auto`
      );
      const weatherData = await weatherRes.json();

      const { temperature, weathercode, windspeed } = weatherData.current_weather;

      // Weather codes

      const weatherDescriptions = {
        0: "Clear sky â˜€ï¸",
        1: "Mainly clear ğŸŒ¤ï¸",
        2: "Partly cloudy â›…",
        3: "Overcast â˜ï¸",
        45: "Fog ğŸŒ«ï¸",
        48: "Depositing rime fog ğŸŒ«ï¸",
        51: "Light drizzle ğŸŒ¦ï¸",
        61: "Rain ğŸŒ§ï¸",
        71: "Snow â„ï¸",
        95: "Thunderstorm â›ˆï¸"
      };

      const description = weatherDescriptions[weathercode] || "Unknown weather";

      // Show results on the screen
      
      locationElement.textContent = `${name}, ${country}`;
      temperatureElement.textContent = `${Math.round(temperature)} Â°C`;
      descriptionElement.textContent = description;
    } catch (error) {
      console.error("Error fetching weather data:", error);
      locationElement.textContent = "Something went wrong ğŸ˜…";
    }
  });
</script>

  </body>
</html>
